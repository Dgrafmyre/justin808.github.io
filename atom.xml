<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Rails on Maui]]></title>
  <link href="http://justin808.github.io/atom.xml" rel="self"/>
  <link href="http://justin808.github.io/"/>
  <updated>2013-04-28T21:22:04-10:00</updated>
  <id>http://justin808.github.io/</id>
  <author>
    <name><![CDATA[Justin Gordon]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Octopress Setup with Github, Org-mode, and LiveReload]]></title>
    <link href="http://justin808.github.io/blog/2013/04/27/octopress-setup-with-github-and-org-mode/"/>
    <updated>2013-04-27T22:46:00-10:00</updated>
    <id>http://justin808.github.io/blog/2013/04/27/octopress-setup-with-github-and-org-mode</id>
    <content type="html"><![CDATA[<p>
by Justin Gordon
</p>


<p>
WordPress seemed like a good blogging platform, but it just didn&#8217;t feel right.
I spend all my day editing text files, and in the past year, I fell in love
with org-mode for all non-coding writing. If you don&#8217;t know Org Mode, it&#8217;s like
having Markdown mode on steroids. You can have a numbered list in Markdown, but
org-mode lets you re-order the list, and that&#8217;s just the beginning. Editing
blog documents in the WordPress editor felt almost as bad as being told to use
MS Word. I found that ergonomics of org-mode, including all the goodness of
recent versions of <a href="http://www.gnu.org/software/emacs/">Emacs</a>, including <a href="http://emacswiki.org/emacs/Evil">Evil</a> (Vim emulation), just made organization
of creative thoughts so much more enjoyable.
</p>


<p>
So I bit the bullet this weekend, and dove into <a href="http://octopress.org/">Octopress</a>. You&#8217;re looking at the
results of this endeavor, including my first Octopress article, and the latest
on redoing what I just did, which is using Octopress with Org Mode authoring,
using LiveReload, and deployed at no charge on github.com. 
</p>


<p>
If you used to writing real web applications, rather than know the intricacies
of a giant monolithic blogging platform, then the <a href="http://octopress.org/docs/theme/template/">customization of Octopress</a>
seems so much more straightforward.  
</p>


<p>
I like <a href="https://github.com/robdodson/robdodson.github.com/blob/source/source/_posts/2012-04-30-custom-domain-with-octopress-and-github-pages.markdown">Rob Dodson&#8217;s summary</a>:
</p>


<blockquote><p><a href="http://octopress.org/">Octopress</a> is a blogging framework written by <a href="http://brandonmathis.com/">Brandon Mathis</a>
(<a href="https://twitter.com/#!/imathis">@imathis</a>) which sits on top of <a href="https://github.com/mojombo/jekyll">Jekyll</a>. Jekyll is
a static site generator, meaning there&#8217;s no database associated with your blog. Instead of writing everything in a
WSYWIG linked to MySQL (like Wordpress or Blogger) you produce text files using Markdown which are then converted to
static HTML. There are 3 huge benefits to this approach. First, writing in Markdown is awesome. Once you learn the
syntax it&#8217;s incredibly fast and you don&#8217;t have to spend time playing with a tiny little editor window just to
<s>add</s> <em>some</em> <strong>style</strong> to your posts. Second, writing in your favorite text editor is also awesome. I produce
everything in <a href="http://www.sublimetext.com/2">Sublime Text 2</a> and every day I discover new tricks to make the process
better. If you&#8217;ve ever had to write a blog post using one of those horrible little TinyMCE editors you will appreciate
this feature. And lastly, static HTML is <em>fast</em>.</p></blockquote>

<p>
I found it totally neat that I could embed markdown inside the org-mode
document. See below for how this is done.
</p>


<p>
This article should be useful for:
</p>


<ol>
<li>Anybody reading this near the date April 27, 2013, as any technical
     instructions seem to degrade in accuracy over time.
</li>
<li>Any interest in using org-mode to publish to Octopress including some
     reasons I use org-mode
</li>
<li>Some explanation of what Octopress and git are doing.
</li>
<li>How to use LiveReload with Octopress and org-mode
</li>
<li>Anybody curious about how using free github pages works to host Octopress. 
</li>
</ol>




<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Useful Links</a></li>
<li><a href="#sec-2">2 Basic setup</a></li>
<li><a href="#sec-3">3 POW</a></li>
<li><a href="#sec-4">4 LiveReload</a></li>
<li><a href="#sec-5">5 Why org-mode for blog publishing?</a></li>
<li><a href="#sec-6">6 Org-mode Integration</a></li>
<li><a href="#sec-7">7 Deploying to Github: Directory Structure of Octopress and the master and source Git Branches</a></li>
<li><a href="#sec-8">8 Parting words&hellip;</a></li>
</ul>
</div>
</div>




<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Useful Links</h2>
<div class="outline-text-2" id="text-1">

<ol>
<li><a href="http://webdesign.tutsplus.com/tutorials/applications/getting-started-with-octopress/">Getting Started with Octopress</a>: Nice overall tutorial. Very current!
   March 2013.
</li>
<li><a href="http://robdodson.me/blog/2012/04/30/custom-domain-with-octopress-and-github-pages">Rob Dodson on Octopress</a>: Most of the instructions I show below are from this
   posting on April 30th, 2012.
</li>
<li><a href="http://joelmccracken.github.io/entries/octopress-is-pretty-sweet/">Joel McCracken on Octopress</a>:
</li>
<li><a href="https://help.github.com/articles/setting-up-a-custom-domain-with-pages">Github directions on setting up a custom domain</a> 
</li>
<li><a href="http://code.dblock.org/octopress-setting-up-a-blog-and-contributing-to-an-existing-one">dblock.org Article on Octopress</a>: A good explanation from Jan 17, 2012,
   especially on the difference of the source and master branches.
</li>
<li><a href="http://blog.paphus.com/blog/2012/08/01/introducing-octopress-blogging-for-org-mode/">Introducing Octopress Blogging for Org-Mode</a>: For org-mode. See below.
</li>
<li><a href="http://hiltmon.com/blog/2013/04/17/18-months-of-octopress/">18 Months of Octopress</a>: Nice article on why Octopress was worth the switch.
</li>
<li><a href="http://odino.org/bash-aliases-for-octopress/">Shell Aliases for Octopress</a>: Save time with these shortcuts
</li>
</ol>


</div>

</div>




<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Basic setup</h2>
<div class="outline-text-2" id="text-2">

<ol>
<li><a href="#http-robdodson.me-blog-2012-04-30-custom-domain-with-octopress-and-github-pages">Rob Dodson on Octopress</a>: Start off with these instructions from this posting
   on April 30th, 2012. There are a few differences worth noting:
<ol>
<li>You may wish to change the .rvmrc to a .ruby-version file
</li>
<li>Github recommends your deployment repository be named <code>yourname.github.io</code>,
      not <code>yourname.github.com</code>.
</li>
<li>After you run <code>rake setup_github_pages</code> and before running <code>rake       generate</code>, you should run <code>rake install</code>. If you forget, there&#8217;s a clear
      message indicating this omission.
</li>
</ol>

</li>
<li>Customize <code>octopress/_config.yml</code>. The yaml file contains descriptions.
</li>
<li>Update the DNS to use your custom domain if you wish: <a href="https://help.github.com/articles/setting-up-a-custom-domain-with-pages">Github directions on setting up a custom domain</a>
</li>
<li>At this point, you can either create a post or a page:
</li>
</ol>



<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  rake new_post<span class="o">[</span><span class="s2">&quot;my post name&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


 


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  rake new_page<span class="o">[</span><span class="s2">&quot;my page name&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>



<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="c"># same as generate and deploy</span>
</span><span class='line'>  rake gen_deploy
</span></code></pre></td></tr></table></div></figure>


 


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="c"># Watch the site and regenerate when it changes</span>
</span><span class='line'>  rake watch
</span></code></pre></td></tr></table></div></figure>


  


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="c"># preview the site in a web browser</span>
</span><span class='line'>  rake preview
</span></code></pre></td></tr></table></div></figure>


  


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="c"># See all the available rake options</span>
</span><span class='line'>  rake -T
</span></code></pre></td></tr></table></div></figure>



<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  <span class="c"># Save changes to source branch</span>
</span><span class='line'>  git add .
</span><span class='line'>  git commit -m <span class="s2">&quot;save changes to source&quot;</span>
</span><span class='line'>  git push origin <span class="nb">source</span>
</span></code></pre></td></tr></table></div></figure>


</div>

</div>




<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">POW</h2>
<div class="outline-text-2" id="text-3">

<p>Pow allows you to point your browser to <a href="http://octopress.dev">http://octopress.dev</a> to see your
Octopress website. Scroll to the bottom of this page for details on <a href="http://octopress.org/docs/blogging/">POW</a>. The
alternative to running POW is to run.

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  rake preview
</span></code></pre></td></tr></table></div></figure>


</p></div>

</div>




<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">LiveReload</h2>
<div class="outline-text-2" id="text-4">

<p>LiveReload is a browser extension for Chrome that will automatically refresh
the browser after you publish your file. You don&#8217;t need to buy the paid
product. I use the <a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei?hl=en">Chrome browser extension</a>. You can use this with or without
POW.
</p><ul>
<li><a href="http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions-">Install the browser extension</a> for your type of browser.
</li>
<li>Add these two entries to your <code>Gemfile</code>, in the :development group:
</li>
</ul>



<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>   <span class="n">gem</span> <span class="s1">&#39;guard&#39;</span>
</span><span class='line'>   <span class="n">gem</span> <span class="s1">&#39;guard-livereload&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Create a file called <code>Guardfile</code> containing something like:
</li>
</ul>



<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>     <span class="n">guard</span> <span class="s1">&#39;livereload&#39;</span> <span class="k">do</span>
</span><span class='line'>       <span class="n">watch</span><span class="p">(</span><span class="sr">%r{public/generated}</span><span class="p">)</span>
</span><span class='line'>       <span class="n">watch</span><span class="p">(</span><span class="sr">%r{public/.+\.(css|js|html)}</span><span class="p">)</span>
</span><span class='line'>     <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Start 2 shell tabs running these commands: <code>rake generate &amp;&amp; rake watch</code>
   and <code>guard</code> 
</li>
</ul>



<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>     &gt; rake generate <span class="o">&amp;&amp;</span> rake watch
</span></code></pre></td></tr></table></div></figure>

<p>
   This screen shot shows <code>watch</code> updating the deployment files.
   <img src="file:///2013-04-27-octopress-setup-with-github-and-org-mode/rake-generate-watch.png"  alt="file:///2013-04-27-octopress-setup-with-github-and-org-mode/rake-generate-watch.png" />
   start guard LiveReload

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>     &gt; guard
</span></code></pre></td></tr></table></div></figure>

   This screen grab shows guard detecting the browser and telling the
   browser to update.
   <img src="file:///2013-04-27-octopress-setup-with-github-and-org-mode/guard-console.png"  alt="file:///2013-04-27-octopress-setup-with-github-and-org-mode/guard-console.png" />
</p>
<p>
It&#8217;s really worth the effort to get LiveReload working with Octopress.
</p>
<p>
It&#8217;s worth noting that if you&#8217;re running any other instance of guard-
LiveReload, then one of these two copies will win and one won&#8217;t work. If you
run a rails server this way, then this can bite you. It took me a bit of time
to figure out why guard wasn&#8217;t working.
</p>
</div>

</div>




<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">Why org-mode for blog publishing?</h2>
<div class="outline-text-2" id="text-5">

<p><a href="http://orgmode.org/">Org-mode</a> offers quite a bit more than plain markdown. It&#8217;s quite the <b>hacker&#8217;s delight</b> for note taking and authoring of blog articles. Down below I list a few
reasons why org-mode. Here&#8217;s a few org-mode features I love (Some are Emacs
ones):
</p><ol>
<li>All headers and list items can be reordered with minimal keystrokes (think
   super powerful outliner).
</li>
<li>Numbered lists
</li>
<li>Editable tables in text editor, with movable columns, movable rows
</li>
<li>Ergonomics of insertion of URLs and images.
</li>
<li>Includes the basics of markdown, such as source code blocks and much more.
</li>
</ol>


</div>

</div>




<div id="outline-container-6" class="outline-2">
<h2 id="sec-6">Org-mode Integration</h2>
<div class="outline-text-2" id="text-6">

<p>I found a plugin that automates the process of converting an org-mode document
(<code>.org</code> file) in <code>source/org_posts</code> into a <code>.markdown</code> document in
<code>source/_posts</code>. Once the markdown document is saved in <sub>posts</sub>, the <code>rake watch</code> task picks up the change and deploys the file, and LiveReload can then
automatically update your web browser. <b>Neat!</b>
</p>
<p>
Here are the basic steps:
</p><ol>
<li>Follow the instructions here: <a href="http://blog.paphus.com/blog/2012/08/01/introducing-octopress-blogging-for-org-mode/">Introducing Octopress Blogging for Org-Mode</a>
</li>
<li>At the time of this article, April 27, there&#8217;s a bug with the latest
   org-mode. <a href="https://github.com/craftkiller/orgmode-octopress/issues/3">I posted a workaround.</a> By the time you read this, you probably
   won&#8217;t need that tip.
</li>
<li>Images work fine. My strategy for org-mode is to create a separate
   subdirectory for each org-mode document for images. That keeps the images
   attached to the original document. The above instructions work fine at
   publishing images.
</li>
<li>You can embed Markdown (or other Octopress/Jekyll directives) by embedding
   inside of a <code>#+begin_html</code> and <code>#+end_html</code> block.
   <img src="file:///2013-04-27-octopress-setup-with-github-and-org-mode/quoting-markdown-in-org-mode.png"  alt="file:///2013-04-27-octopress-setup-with-github-and-org-mode/quoting-markdown-in-org-mode.png" />
</li>
</ol>



</div>

</div>




<div id="outline-container-7" class="outline-2">
<h2 id="sec-7">Deploying to Github: Directory Structure of Octopress and the master and source Git Branches</h2>
<div class="outline-text-2" id="text-7">

<p>Github offers free hosting of both the blog deployment and source. You&#8217;re
looking at the deployment right now. You can find the source here at <a href="https://github.com/justin808/justin808.github.io">my git repo justin808.github.io</a>. I doubt you could beat the price, performance, and
convenience. You can look inside of this repo, clone it, etc. and you have
everything that it took to make this blog.
</p>
<p>
I originally was quite confused by the concept of using two separate git
branches to make up what gets deployed on the live website versus the git
repository of my articles. Plus, there&#8217;s the issue of Octopress git repository
that you clone when starting out. Eventually, I figured out that the two branches
simply contain different files, with one containing the original Octopress
files. Here&#8217;s a few screen grabs that might clarify the situation for you.
</p>
<p>
The <code>octopress/public</code> directory corresponds to what you&#8217;ll find on the github
site for your deployment (master branch).
</p>
<p>
<img src="file:///2013-04-27-octopress-setup-with-github-and-org-mode/public-dir-corresponds-master-branch.png"  alt="file:///2013-04-27-octopress-setup-with-github-and-org-mode/public-dir-corresponds-master-branch.png" />
</p>
<p>
The octopress/.gitignore file contains entries like <code>public</code>, which essentially
keeps the <code>rake generate</code> files out of the source branch.
</p>
<p>
Here&#8217;s the github master branch right after creation. Note the correspondence
with <code>public</code>. This is what gets deployed as your blog.
<img src="file:///2013-04-27-octopress-setup-with-github-and-org-mode/github-master-branch.png"  alt="file:///2013-04-27-octopress-setup-with-github-and-org-mode/github-master-branch.png" />
</p>
<p>
Here&#8217;s the github source branch. This contains the octopress environment, as
well as your customizations and blog posts.
<img src="file:///2013-04-27-octopress-setup-with-github-and-org-mode/github-source-branch.png"  alt="file:///2013-04-27-octopress-setup-with-github-and-org-mode/github-source-branch.png" />
</p>

</div>

</div>




<div id="outline-container-8" class="outline-2">
<h2 id="sec-8">Parting words&hellip;</h2>
<div class="outline-text-2" id="text-8">

<p>Thanks in advance for any suggestions on this article. I hope you find it
helpful. Check me out on Twitter: <a href="http://twitter.com/railsonmaui">@RailsOnMaui</a>.
</p></div>
</div>

]]></content>
  </entry>
  
</feed>
